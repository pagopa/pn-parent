<project name="codegen" basedir=".">
    <target name="download-script" unless="pagopa.codegen.skipdownload">
                              
        <echo message="Scarico lo script" />

        <get src="https://raw.githubusercontent.com/pagopa/pn-codegen/${pagopa.codegen.version}/start.sh"
        dest="scripts/openapi/generate-code.sh"
        verbose="true"
        />

        <exec executable="chmod" >
        <arg value="u+x"/>
        <arg value="scripts/openapi/generate-code.sh"/>
        </exec>
    </target>

    <target name="exec-script" unless="pagopa.codegen.skipexec">
        <echo message="Eseguo lo script" />
        <exec executable="./scripts/openapi/generate-code.sh" />
    </target>

     <target name="go" depends="download-script, exec-script"/>

</project>